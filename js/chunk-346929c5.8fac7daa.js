(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-346929c5"],{1276:function(t,e,s){"use strict";var a=s("2ba4"),r=s("c65b"),i=s("e330"),n=s("d784"),c=s("44e7"),o=s("825a"),d=s("1d80"),u=s("4840"),l=s("8aa5"),f=s("50c4"),h=s("577e"),v=s("dc4a"),p=s("4dae"),g=s("14c3"),b=s("9263"),m=s("9f7f"),x=s("d039"),C=m.UNSUPPORTED_Y,y=4294967295,_=Math.min,A=[].push,S=i(/./.exec),w=i(A),k=i("".slice),$=!x((function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var s="ab".split(t);return 2!==s.length||"a"!==s[0]||"b"!==s[1]}));n("split",(function(t,e,s){var i;return i="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(t,s){var i=h(d(this)),n=void 0===s?y:s>>>0;if(0===n)return[];if(void 0===t)return[i];if(!c(t))return r(e,i,t,n);var o,u,l,f=[],v=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),g=0,m=new RegExp(t.source,v+"g");while(o=r(b,m,i)){if(u=m.lastIndex,u>g&&(w(f,k(i,g,o.index)),o.length>1&&o.index<i.length&&a(A,f,p(o,1)),l=o[0].length,g=u,f.length>=n))break;m.lastIndex===o.index&&m.lastIndex++}return g===i.length?!l&&S(m,"")||w(f,""):w(f,k(i,g)),f.length>n?p(f,0,n):f}:"0".split(void 0,0).length?function(t,s){return void 0===t&&0===s?[]:r(e,this,t,s)}:e,[function(e,s){var a=d(this),n=void 0==e?void 0:v(e,t);return n?r(n,e,a,s):r(i,h(a),e,s)},function(t,a){var r=o(this),n=h(t),c=s(i,r,n,a,i!==e);if(c.done)return c.value;var d=u(r,RegExp),v=r.unicode,p=(r.ignoreCase?"i":"")+(r.multiline?"m":"")+(r.unicode?"u":"")+(C?"g":"y"),b=new d(C?"^(?:"+r.source+")":r,p),m=void 0===a?y:a>>>0;if(0===m)return[];if(0===n.length)return null===g(b,n)?[n]:[];var x=0,A=0,S=[];while(A<n.length){b.lastIndex=C?0:A;var $,D=g(b,C?k(n,A):n);if(null===D||($=_(f(b.lastIndex+(C?A:0)),n.length))===x)A=l(n,A,v);else{if(w(S,k(n,x,A)),S.length===m)return S;for(var E=1;E<=D.length-1;E++)if(w(S,D[E]),S.length===m)return S;A=x=$}}return w(S,k(n,x)),S}]}),!$,C)},"159b":function(t,e,s){var a=s("da84"),r=s("fdbc"),i=s("785a"),n=s("17c2"),c=s("9112"),o=function(t){if(t&&t.forEach!==n)try{c(t,"forEach",n)}catch(e){t.forEach=n}};for(var d in r)r[d]&&o(a[d]&&a[d].prototype);o(i)},"17c2":function(t,e,s){"use strict";var a=s("b727").forEach,r=s("a640"),i=r("forEach");t.exports=i?[].forEach:function(t){return a(this,t,arguments.length>1?arguments[1]:void 0)}},"1a0d":function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"navi"},[s("van-nav-bar",{attrs:{title:t.title,"left-text":"返回","right-text":t.rightText,fixed:t.fixed,"left-arrow":""},on:{"click-left":t.back,"click-right":t.clickRight}})],1)},r=[],i={name:"Navi",props:{title:{type:String,default:""},rightText:{type:String,default:""},fixed:{type:Boolean,default:!1}},methods:{back:function(){this.$router.go(-1)},clickRight:function(){this.$emit("click-right")}}},n=i,c=(s("22ec"),s("2877")),o=Object(c["a"])(n,a,r,!1,null,"4defb923",null);e["a"]=o.exports},"20e8":function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"shopbag-item"},[s("div",{staticClass:"shopbag-item-img"},[s("img",{staticClass:"auto-img",attrs:{src:t.pro.small_img,alt:""}})]),s("div",{staticClass:"shopbag-item-content"},[s("div",{staticClass:"shopbag-name"},[s("div",{staticClass:"zhname-box"},[s("div",{staticClass:"zhname one-text"},[t._v(t._s(t.pro.name))]),s("div",{staticClass:"rule one-text"},[t._v(t._s(t.pro.rule))])]),s("div",{staticClass:"enname one-text"},[t._v(t._s(t.pro.enname))])]),s("div",{staticClass:"price-count"},[s("div",{staticClass:"price"},[t._v("¥"+t._s(t.pro.price))]),s("div",{staticClass:"count"},[t._v("x"+t._s(t.pro.count))])])])])},r=[],i={name:"OrderPro",props:{pro:{type:Object,default:function(){return{}}}}},n=i,c=(s("8fbf"),s("2877")),o=Object(c["a"])(n,a,r,!1,null,"deb88d52",null);e["a"]=o.exports},"22ec":function(t,e,s){"use strict";s("750a")},"4dae":function(t,e,s){var a=s("da84"),r=s("23cb"),i=s("07fa"),n=s("8418"),c=a.Array,o=Math.max;t.exports=function(t,e,s){for(var a=i(t),d=r(e,a),u=r(void 0===s?a:s,a),l=c(o(u-d,0)),f=0;d<u;d++,f++)n(l,f,t[d]);return l.length=f,l}},"5fd5":function(t,e,s){},"750a":function(t,e,s){},8130:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"order-buy"},[s("Navi",{attrs:{fixed:!0,title:"订单结算"}}),s("div",{staticClass:"order-buy-box"},[s("div",{staticClass:"order-address"},[s("div",{staticClass:"select-address"},[s("div",{staticClass:"select-address-title",on:{click:t.selectAddress}},[t._v("选择地址")]),s("div",{staticClass:"arrow"},[s("van-icon",{attrs:{name:"arrow"}})],1)]),s("div",{staticClass:"userinfo-box"},[s("div",{staticClass:"userinfo"},[s("div",{staticClass:"username"},[t._v(t._s(t.userSelectAddress.name))]),s("div",{staticClass:"phone"},[t._v(t._s(t.userSelectAddress.tel))]),s("div",{directives:[{name:"show",rawName:"v-show",value:t.userSelectAddress.isDefault,expression:"userSelectAddress.isDefault"}]},[s("van-tag",{attrs:{round:"",color:"#0C34BA"}},[t._v("默认")])],1)]),s("div",{staticClass:"detail-address"},[t._v(t._s(t.userSelectAddress.address))])])]),s("div",{staticClass:"order-product"},[s("div",{staticClass:"order-info"},[t._v("订单信息")]),s("div",{staticClass:"order-pro"},t._l(t.buyShopbagProduct,(function(t,e){return s("div",{key:e,staticClass:"order-pro-item"},[s("OrderPro",{attrs:{pro:t}})],1)})),0),s("div",{staticClass:"order-total"},[s("div",{staticClass:"order-count"},[t._v("共计 "+t._s(t.count)+" 件商品")]),s("div",{staticClass:"order-money"},[t._v("订单金额：¥"+t._s(t.total))]),s("div",{staticClass:"left-circle circle"}),s("div",{staticClass:"right-circle circle"})])])]),s("van-popup",{attrs:{position:"bottom",closeable:""},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[s("div",{staticClass:"sel-address"},[s("div",{staticClass:"sel-address-title"},[t._v("选择地址")]),s("div",[s("van-address-list",{attrs:{list:t.list,"default-tag-text":"默认"},on:{add:t.addAddress,select:t.select},model:{value:t.chosenAddressId,callback:function(e){t.chosenAddressId=e},expression:"chosenAddressId"}})],1)])]),s("div",{staticClass:"buy-now"},[s("van-button",{attrs:{round:"",block:"",color:"#0C34BA"},on:{click:t.pay}},[t._v("立即结算")])],1)],1)},r=[],i=(s("ac1f"),s("1276"),s("d3b7"),s("159b"),s("99af"),s("e9c4"),s("b0c0"),s("1a0d")),n=s("20e8"),c={name:"OrderBuy",components:{Navi:i["a"],OrderPro:n["a"]},data:function(){return{show:!1,chosenAddressId:"",list:[],userSelectAddress:{tel:"",name:"",isDefault:!1,address:""},sids:[],buyShopbagProduct:[],count:0,total:0}},created:function(){this.sids=this.$route.query.sids.split(/-/),this.getAddressData(),this.getBuyShopbagProduct()},methods:{addAddress:function(){this.$router.push({name:"Address"})},selectAddress:function(){this.show=!0},select:function(t){for(var e in this.userSelectAddress)this.userSelectAddress[e]=t[e];this.show=!1},getAddressData:function(){var t=this;this.axios({method:"get",url:"/findAddress"}).then((function(e){if(700===e.data.code)return t.$toast(e.data.msg),void t.$router.push({name:"Login"});2e4===e.data.code&&(e.data.result.forEach((function(e){if(e.isDefault=Boolean(e.isDefault),e.address="".concat(e.province).concat(e.city).concat(e.county).concat(e.addressDetail),e.isDefault)for(var s in t.chosenAddressId=e.id,t.userSelectAddress)t.userSelectAddress[s]=e[s]})),t.list=e.data.result)})).catch((function(t){}))},getBuyShopbagProduct:function(){var t=this;this.axios({method:"get",url:"/commitShopcart",params:{sids:JSON.stringify(this.sids)}}).then((function(e){if(700===e.data.code)return t.$toast(e.data.msg),void t.$router.push({name:"Login"});if(5e4===e.data.code){if(0===e.data.result.length)return void t.$router.push({name:"Shopbag"});var s=0,a=0;e.data.result.forEach((function(t){s+=t.count,a+=t.count*t.price})),t.buyShopbagProduct=e.data.result,t.count=s,t.total=a}})).catch((function(t){}))},pay:function(){var t=this;this.chosenAddressId?this.axios({method:"post",url:"/pay",data:{sids:JSON.stringify(this.sids),phone:this.userSelectAddress.tel,address:this.userSelectAddress.address,receiver:this.userSelectAddress.name}}).then((function(e){t.$toast(e.data.msg),700!==e.data.code?6e4===e.data.code&&setTimeout((function(){t.$router.push({name:"Order"})}),1e3):t.$router.push({name:"Login"})})).catch((function(t){})):this.$toast("请选择地址")}}},o=c,d=(s("8ac6"),s("2877")),u=Object(d["a"])(o,a,r,!1,null,"4223c9a9",null);e["default"]=u.exports},"8ac6":function(t,e,s){"use strict";s("e1bf")},"8fbf":function(t,e,s){"use strict";s("5fd5")},a640:function(t,e,s){"use strict";var a=s("d039");t.exports=function(t,e){var s=[][t];return!!s&&a((function(){s.call(null,e||function(){return 1},1)}))}},b0c0:function(t,e,s){var a=s("83ab"),r=s("5e77").EXISTS,i=s("e330"),n=s("9bf2").f,c=Function.prototype,o=i(c.toString),d=/function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/,u=i(d.exec),l="name";a&&!r&&n(c,l,{configurable:!0,get:function(){try{return u(d,o(this))[1]}catch(t){return""}}})},e1bf:function(t,e,s){},e9c4:function(t,e,s){var a=s("23e7"),r=s("da84"),i=s("d066"),n=s("2ba4"),c=s("e330"),o=s("d039"),d=r.Array,u=i("JSON","stringify"),l=c(/./.exec),f=c("".charAt),h=c("".charCodeAt),v=c("".replace),p=c(1..toString),g=/[\uD800-\uDFFF]/g,b=/^[\uD800-\uDBFF]$/,m=/^[\uDC00-\uDFFF]$/,x=function(t,e,s){var a=f(s,e-1),r=f(s,e+1);return l(b,t)&&!l(m,r)||l(m,t)&&!l(b,a)?"\\u"+p(h(t,0),16):t},C=o((function(){return'"\\udf06\\ud834"'!==u("\udf06\ud834")||'"\\udead"'!==u("\udead")}));u&&a({target:"JSON",stat:!0,forced:C},{stringify:function(t,e,s){for(var a=0,r=arguments.length,i=d(r);a<r;a++)i[a]=arguments[a];var c=n(u,null,i);return"string"==typeof c?v(c,g,x):c}})}}]);
//# sourceMappingURL=chunk-346929c5.8fac7daa.js.map