(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-72da8ad4"],{"159b":function(t,a,e){var i=e("da84"),s=e("fdbc"),r=e("785a"),n=e("17c2"),c=e("9112"),o=function(t){if(t&&t.forEach!==n)try{c(t,"forEach",n)}catch(a){t.forEach=n}};for(var d in s)s[d]&&o(i[d]&&i[d].prototype);o(r)},"17c2":function(t,a,e){"use strict";var i=e("b727").forEach,s=e("a640"),r=s("forEach");t.exports=r?[].forEach:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}},"1a0d":function(t,a,e){"use strict";var i=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"navi"},[e("van-nav-bar",{attrs:{title:t.title,"left-text":"返回","right-text":t.rightText,fixed:t.fixed,"left-arrow":""},on:{"click-left":t.back,"click-right":t.clickRight}})],1)},s=[],r={name:"Navi",props:{title:{type:String,default:""},rightText:{type:String,default:""},fixed:{type:Boolean,default:!1}},methods:{back:function(){this.$router.go(-1)},clickRight:function(){this.$emit("click-right")}}},n=r,c=(e("22ec"),e("2877")),o=Object(c["a"])(n,i,s,!1,null,"4defb923",null);a["a"]=o.exports},"20e8":function(t,a,e){"use strict";var i=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"shopbag-item"},[e("div",{staticClass:"shopbag-item-img"},[e("img",{staticClass:"auto-img",attrs:{src:t.pro.small_img,alt:""}})]),e("div",{staticClass:"shopbag-item-content"},[e("div",{staticClass:"shopbag-name"},[e("div",{staticClass:"zhname-box"},[e("div",{staticClass:"zhname one-text"},[t._v(t._s(t.pro.name))]),e("div",{staticClass:"rule one-text"},[t._v(t._s(t.pro.rule))])]),e("div",{staticClass:"enname one-text"},[t._v(t._s(t.pro.enname))])]),e("div",{staticClass:"price-count"},[e("div",{staticClass:"price"},[t._v("¥"+t._s(t.pro.price))]),e("div",{staticClass:"count"},[t._v("x"+t._s(t.pro.count))])])])])},s=[],r={name:"OrderPro",props:{pro:{type:Object,default:function(){return{}}}}},n=r,c=(e("8fbf"),e("2877")),o=Object(c["a"])(n,i,s,!1,null,"deb88d52",null);a["a"]=o.exports},"22ec":function(t,a,e){"use strict";e("750a")},"267e":function(t,a,e){},"30c7":function(t,a,e){"use strict";var i=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"bg-box"},[e("div",{staticClass:"bg"}),e("div",{staticClass:"bg-content"},[t._t("default")],2)])},s=[],r={name:"Bg"},n=r,c=(e("6ddd"),e("2877")),o=Object(c["a"])(n,i,s,!1,null,"19bd7a08",null);a["a"]=o.exports},"5fd5":function(t,a,e){},"6ddd":function(t,a,e){"use strict";e("267e")},"750a":function(t,a,e){},"8fbf":function(t,a,e){"use strict";e("5fd5")},a434:function(t,a,e){"use strict";var i=e("23e7"),s=e("da84"),r=e("23cb"),n=e("5926"),c=e("07fa"),o=e("7b0b"),d=e("65f0"),l=e("8418"),u=e("1dde"),f=u("splice"),v=s.TypeError,h=Math.max,p=Math.min,m=9007199254740991,g="Maximum allowed length exceeded";i({target:"Array",proto:!0,forced:!f},{splice:function(t,a){var e,i,s,u,f,b,_=o(this),C=c(_),x=r(t,C),y=arguments.length;if(0===y?e=i=0:1===y?(e=0,i=C-x):(e=y-2,i=p(h(n(a),0),C-x)),C+e-i>m)throw v(g);for(s=d(_,i),u=0;u<i;u++)f=x+u,f in _&&l(s,u,_[f]);if(s.length=i,e<i){for(u=x;u<C-i;u++)f=u+i,b=u+e,f in _?_[b]=_[f]:delete _[b];for(u=C;u>C-i+e;u--)delete _[u-1]}else if(e>i)for(u=C-i;u>x;u--)f=u+i-1,b=u+e-1,f in _?_[b]=_[f]:delete _[b];for(u=0;u<e;u++)_[u+x]=arguments[u+2];return _.length=C-i+e,s}})},a640:function(t,a,e){"use strict";var i=e("d039");t.exports=function(t,a){var e=[][t];return!!e&&i((function(){e.call(null,a||function(){return 1},1)}))}},c3ce:function(t,a,e){"use strict";e("eaaf")},cf2a:function(t,a,e){"use strict";e.r(a);var i=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"order"},[e("Navi",{attrs:{title:"我的订单",fixed:!0}}),e("div",[e("Bg",[e("van-tabs",{attrs:{color:"#0C34BA","line-height":"2",animated:"",swipeable:""},on:{change:t.toggleTab},model:{value:t.active,callback:function(a){t.active=a},expression:"active"}},t._l(t.tabsData,(function(a,i){return e("van-tab",{key:i,attrs:{title:a.title}},[e("div",{staticClass:"tab-content"},[t._l(t.orderData,(function(a,i){return e("div",{key:i,staticClass:"order-product"},[e("div",{staticClass:"order-info"},[t._v("订单信息")]),e("div",{staticClass:"order-no"},[e("div",{staticClass:"no"},[t._v("订单编号："+t._s(a.oid))]),e("div",{staticClass:"order-op"},[1===a.status?e("div",{on:{click:function(e){return t.confirm(a,i)}}},[t._v("确认收货")]):e("div",{staticClass:"op"},[e("div",{staticClass:"finished"},[t._v("已完成")]),e("div",{staticClass:"remove",on:{click:function(e){return t.removeOrder(a.oid,i)}}},[e("van-icon",{attrs:{name:"delete-o"}})],1)])])]),e("div",{staticClass:"order-pro"},t._l(a.product,(function(t,a){return e("div",{key:a,staticClass:"order-pro-item"},[e("OrderPro",{attrs:{pro:t}})],1)})),0),e("div",{staticClass:"order-total"},[e("div",{staticClass:"order-date"},[t._v(t._s(t._f("formatDate")(a.date,"yyyy-MM-dd hh:mm:ss")))]),e("div",{staticClass:"order-count"},[t._v("共计 "+t._s(a.count)+" 件商品")]),e("div",{staticClass:"order-money"},[t._v("订单金额：¥"+t._s(a.total))]),e("div",{staticClass:"left-circle circle"}),e("div",{staticClass:"right-circle circle"})])])})),e("van-empty",{directives:[{name:"show",rawName:"v-show",value:0===t.orderData.length,expression:"orderData.length === 0"}],attrs:{description:"没有订单数据！"}})],2)])})),1)],1)],1)],1)},s=[],r=(e("d3b7"),e("159b"),e("a434"),e("1a0d")),n=e("30c7"),c=e("20e8"),o={name:"Order",components:{Navi:r["a"],Bg:n["a"],OrderPro:c["a"]},data:function(){return{active:0,count:0,total:0,tabsData:[{title:"全部"},{title:"进行中"},{title:"已完成"}],orderData:[]}},created:function(){this.getOrderData()},methods:{getOrderData:function(){var t=this;this.axios({method:"get",url:"/findOrder",params:{status:this.active}}).then((function(a){if(700===a.data.code)return t.$toast(a.data.msg),void t.$router.push({name:"Login"});if(7e4===a.data.code){var e=[];a.data.result.forEach((function(t){t.small_img=t.smallImg,-1===e.indexOf(t.oid)&&e.push(t.oid)}));var i=[];e.forEach((function(t){var e={oid:t,product:[],count:0,total:0};a.data.result.forEach((function(a){t===a.oid&&(void 0===e.status&&(e.status=a.status,e.date=a.createdAt),e.product.push(a),e.count+=a.count,e.total+=a.count*a.price)})),i.push(e)})),t.orderData=i}})).catch((function(t){}))},toggleTab:function(){this.getOrderData()},confirm:function(t,a){var e=this;this.$dialog.confirm({message:"是否确定收货？"}).then((function(){e.axios({method:"post",url:"/receive",data:{oid:t.oid}}).then((function(i){e.$toast(i.data.msg),700!==i.data.code?8e4===i.data.code&&(0===e.active?t.status=2:1===t.status&&e.orderData.splice(a,1)):e.$router.push({name:"Login"})})).catch((function(t){}))})).catch((function(t){}))},removeOrder:function(t,a){var e=this;this.$dialog.confirm({message:"是否确定删除该订单？"}).then((function(){e.axios({method:"post",url:"/removeOrder",data:{oid:t}}).then((function(t){e.$toast(t.data.msg),700!==t.data.code?9e4===t.data.code&&e.orderData.splice(a,1):e.$router.push({name:"Login"})})).catch((function(t){}))})).catch((function(t){}))}}},d=o,l=(e("c3ce"),e("2877")),u=Object(l["a"])(d,i,s,!1,null,"90cbd9f8",null);a["default"]=u.exports},eaaf:function(t,a,e){}}]);
//# sourceMappingURL=chunk-72da8ad4.eb40687b.js.map